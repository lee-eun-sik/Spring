<div th:fragment="header">
<div id="header-area">
    <header class="bg-primary text-white p-3">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="h3 mb-0">
                <a href="/board/list.do" class="text-white text-decoration-none">My Board</a>
            </h1>

            <nav>
                <ul class="nav" id="nav-menu">
                    <!-- ì—¬ê¸°ì— JSë¡œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </ul>
            </nav>
        </div>
    </header>
</div>
<script>
	let gUserId;
	let gApiBaseUrl = "[[${apiBaseUrl}]]";
    $(document).ready(function () {
    	
        ajaxRequest(
            '[[${apiBaseUrl}]]/api/user/view.do',
            {}, // ë¡œê·¸ì¸ì„ í–ˆë‹¤ë©´ jì„¹ì…˜ì—ì„œ ì¿ í‚¤ë¥¼ ìë™ìœ¼ë¡œ ë„˜ì–´ì˜´. ì¿ ê¸°ì— ë“¤ì–´ê°€ìˆëŠ” ê°’ë•Œë¬¸ì— ì™”ë‹¤ê°”ë‹¤í•˜ë©´ì„œ ì„¸ì…˜ì´ ë“¤ì–´ì˜´.
            function (response) {
                if (response.success) {
                    const user = response.data;
                    gUserId = user.userId;
                    console.log(gUserId);
                    $("#nav-menu").html(`
                        <li class="nav-item">
                            <span class="nav-link text-white">ğŸ‘‹ <strong>${user.userId}</strong>ë‹˜</span>
                        </li>
                        <li class="nav-item">
                        <button type="button" id="logOutBtn">ë¡œê·¸ì•„ì›ƒ</button>
                        </li>
                    `);
                    $("#logOutBtn").click(function () { // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
                		ajaxRequest(
               	            '[[${apiBaseUrl}]]/api/user/logout.do',
               	            {},
               	            function (response) {
               	            	if (response.success) {
            	                    alert("ë¡œê·¸ì•„ì›ƒì— ì„±ê³µí•˜ì…¨ìŠµë‹ˆë‹¤.");
            	                    window.location.href ='/user/login.do'; 
            	                } else {
            	                	alert("ë¡œê·¸ì•„ì›ƒì— ì‹¤íŒ¨í•˜ì…¨ìŠµë‹ˆë‹¤.");
            	                }
               	            }
               	    	);
                	});
                	
                    
                } else {
                    $("#nav-menu").html(` // ë¡œê·¸ì¸ íšŒì›ê°€ì…ì„ ë¦¬í„´í•¨
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/user/login.do">ë¡œê·¸ì¸</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/user/register.do">íšŒì›ê°€ì…</a>
                        </li>
                    `);
                }
            }
        );
    });
</script>
</div>
