<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê³µì§€ì‚¬í•­</title>
    <script src="/js/jquery-3.7.1.min.js"></script>
    <script src="/js/common.js?ver=1.0.1"></script>
    <link rel="stylesheet" href="/css/list.css?ver=1.0.1">
</head>
<body>
<header th:replace="fragments/header :: header"></header>

<h2>ê³µì§€ì‚¬í•­</h2>

<div class="button-wrapper">
    <a href="/newsboard/newsboardcreate" class="write-btn">ê²Œì‹œê¸€ ì‘ì„±</a>
</div>

<table>
    <thead>
        <tr>
            <th>ë²ˆí˜¸</th>
            <th>ì‘ì„±ì</th>
            <th>ì œëª©</th>
            <th>ì¡°íšŒìˆ˜</th>
            <th>ì‘ì„±ì¼</th>
            <th>ìƒì„¸ë³´ê¸°</th>
        </tr>
    </thead>
    <tbody>
    <tr th:if="${#lists.isEmpty(newboardList)}">
        <td colspan="6" style="text-align:center; font-size:17px;">ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</td>
    </tr>
    <tr th:each="board : ${newboardList}">
        <td th:text="${board.rn}">1</td>
        <td th:text="${board.createId}">ì•„ì´ë””</td>
        <td th:text="${board.title}">ì œëª©</td>
        <td th:text="${board.viewCount}">0</td>
        <td th:text="${board.createDt}">2025-03-27</td>
        <td><a th:href="@{'/newsboardview?id=' + ${board.boardId}}">ë³´ê¸°</a></td>
    </tr>
    </tbody>
</table>

<!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ -->
<ul>
    <li th:if="${currentPage > 1}">
        <a th:href="@{|/newboardlist?page=${currentPage - 1}&size=${size}|}">&laquo;</a>
    </li>
    <li th:each="i : ${#numbers.sequence(1, totalPages)}">
        <a th:href="@{|/newboardlist?page=${i}&size=${size}|}"
           th:style="${i == currentPage} ? 'font-weight:bold;' : ''"
           th:text="${i}">1</a>
    </li>
    <li th:if="${currentPage < totalPages}">
        <a th:href="@{|/newboardlist?page=${currentPage + 1}&size=${size}|}">&raquo;</a>
    </li>
</ul>

<!-- ê²€ìƒ‰ ì˜ì—­ -->
<div class="search-container">
    <select name="searchColumn" id="searchColumn">
        <option value="TITLE" th:selected="${searchColumn == 'TITLE'}">ì œëª©</option>
        <option value="CREATE_ID" th:selected="${searchColumn == 'CREATE_ID'}">ì‘ì„±ì</option>
    </select>
    <input type="text" id="searchText" name="searchText"
           th:value="${searchText}" placeholder="ì…ë ¥í•´ì£¼ì„¸ìš”">
    <button type="button" id="searchBtn" class="icon-button">ğŸ”</button>
</div>

<script>
    $(document).ready(function () {
        $("#searchBtn").click(function () {
            searchname(1, true);
        });
        $("#viewcategory").change(function () {
            let selectedValue = $(this).val();
            sortByCategory(1, selectedValue);
        });
    });

    function url(page, viewcategory) {
        let searchText = $("#searchText").val();
        let searchColumn = $("#searchColumn").val();

        if (viewcategory) {
            window.location.href = "/newboardlist?" +
                "searchText=" + searchText + "&" +
                "searchColumn=" + searchColumn + "&" +
                "viewcategory=" + viewcategory + "&" +
                "page=" + page + "&" +
                "size=[[${size}]]";
        } else {
            window.location.href = "/newboardlist?" +
                "searchText=" + searchText + "&" +
                "searchColumn=" + searchColumn + "&" +
                "page=" + page + "&" +
                "size=[[${size}]]";
        }
    }

    function searchname(page, checkNow) {
        url(1, null);
    }
</script>

</body>
</html>